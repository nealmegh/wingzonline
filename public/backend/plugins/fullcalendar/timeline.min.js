(function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)})(function(t,e){var i,r,n,o,s,l,a,u,h,c,d,p,f,g,v,m,y,w,S,b,E,D,R,C,T,H,x,k,M,F,_,G,z,L,I,W,P,V,B,A,Y,O,N,j,Z,q,U,X,$,Q,K,J,te,ee,ie,re,ne,oe={}.hasOwnProperty,se=function(t,e){function i(){this.constructor=t}for(var r in e)oe.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},le=[].slice;s=t.fullCalendar,r=s.Calendar,x=s.View,l=s.Grid,Z=s.intersectionToSeg,M=s.compareSegs,L=s.debounce,q=s.isInt,D=s.ScrollbarDetect,o=s.DragListener,N=s.htmlEscape,F=s.computeIntervalUnit,Q=null,$=function(t,e){var i,r;if(i=t.css("direction"),r=t[0],null!=e){if("rtl"===i)switch(Q){case"positive":e=e-r.clientWidth+r.scrollWidth;break;case"reverse":e=-e}return r.scrollLeft=e,t}if(e=r.scrollLeft,"rtl"===i)switch(Q){case"positive":e=e+r.clientWidth-r.scrollWidth;break;case"reverse":e=-e}return e},Y=function(t){var e,i,r;if(e=t.css("direction"),i=t[0],r=i.scrollLeft,"rtl"===e)switch(Q){case"negative":r=r-i.clientWidth+i.scrollWidth;break;case"reverse":r=-r-i.clientWidth+i.scrollWidth}return r},I=function(){var e,i,r;return e=t('<div style=" position: absolute top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 14px; ">A</div>').appendTo("body"),i=e[0],r=i.scrollLeft>0?"positive":(i.scrollLeft=1,e.scrollLeft>0?"reverse":"negative"),e.remove(),r},t(function(){return Q=I()}),p=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.resourceManager=new g(this.options)}return se(e,t),e.prototype.resourceManager=null,e.prototype.addResource=function(t,e){return this.resourceManager.addResource(t,e),this.rerenderResources()},e.prototype.rerefetchResources=function(){return this.resourceManager.fetch(function(t){return function(e){return t.displayResources(e)}}(this))},e.prototype.rerenderResources=function(){return this.resourceManager.get(function(t){return function(e){return t.displayResources(e)}}(this))},e.prototype.displayResources=function(t){return this.view instanceof m?this.view.displayResources(t):void 0},e.prototype.getEventResourceId=function(t){return this.resourceManager.getEventResourceId(t)},e.prototype.getPeerEvents=function(t){var i,r,n,o,s,l,a;for(n=e.__super__.getPeerEvents.apply(this,arguments),s=t.resourceId||"",i=[],l=0,a=n.length;a>l;l++)r=n[l],o=this.getEventResourceId(r)||"",o&&o!==s||i.push(r);return i},e}(r),s.calendarClass=p,d=1,g=function(){function e(t){this.options=t,this.callbacks=[]}return e.prototype.options=null,e.prototype.isFetching=!1,e.prototype.callbacks=null,e.prototype.topLevelResources=null,e.prototype.allResources=null,e.prototype.resourcesById=null,e.prototype.get=function(t){return this.topLevelResources?t(this.topLevelResources):this.fetch(t)},e.prototype.fetch=function(t){return this.callbacks.push(t),this.isFetching?void 0:(this.isFetching=!0,this.fetchRaw(function(e){return function(i){var r,n,o,s,l,a,u,h,c,d,p,f,g,v;for(e.topLevelResources=[],e.allResources=[],e.resourcesById={},o=[],l=0,c=i.length;c>l;l++)r=i[l],n=e.buildResource(r),n&&o.push(n);for(s=[],a=0,d=o.length;d>a;a++)n=o[a],e.addResourceToIndex(n)&&s.push(n);for(u=0,p=s.length;p>u;u++)n=s[u],e.addResourceToTree(n);for(e.isFetching=!1,g=e.callbacks,v=[],h=0,f=g.length;f>h;h++)t=g[h],v.push(t(e.topLevelResources));return v}}(this)))},e.prototype.fetchRaw=function(e){var i;return i=this.options.resources,t.isArray(i)?e(i):"string"==typeof i?t.ajax({url:i,dataType:"json",cache:!1,success:function(){return e(i)}}):"function"==typeof i?i(e):e([])},e.prototype.buildResource=function(e){var i,r,n,o,s,l,a,u;for(null==e.id&&(e.id="_fc"+d++),o=null!=(u=e.children)?u:[],r=[],l=0,a=o.length;a>l;l++)n=o[l],i=this.buildResource(n),i&&r.push(i);return s=t.extend({},e),s.children=r,s},e.prototype.addResource=function(t,e){var i;return i=this.buildResource(t),i&&this.addResourceToIndex(i)&&this.addResourceToTree(i,e),i},e.prototype.addResourceToIndex=function(t){var e,i,r,n;if(this.resourcesById[t.id])return!1;for(this.allResources.push(t),this.resourcesById[t.id]=t,n=t.children,i=0,r=n.length;r>i;i++)e=n[i],e._parent=t,this.addResourceToIndex(e);return t},e.prototype.addResourceToTree=function(e,i){var r,n,o;if(null==i&&(i=-1),n=e[this.options.resourceParentProperty||"parentId"]){if(r=this.resourcesById[n],!r)return!1;o=r.children}else o=this.topLevelResources;return-1!==t.inArray(e,o)?!1:(i>=0?o.splice(i,0,e):o.splice(o.length+i+1,0,e),r&&(e._parent=r),!0)},e.prototype.getResourceById=function(t){return this.resourcesById[t]},e.prototype.getEventResourceId=function(t){return t[this.options.eventResourceProperty||"resourceId"]||""},e.prototype.getEventResourceProperty=function(){return this.options.eventResourceProperty||"resourceId"},e}(),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return se(e,t),e.prototype.isResourcesSet=!1,e.prototype.isResourcesRendered=!1,e.prototype.storedEvents=null,e.prototype.display=function(t){var e;return this.isDisplayed&&(e=this.queryScrollState()),this.clear(),this.setDate(t),this.render(),this.updateSize(),this.renderBusinessHours(),this.isDisplayed=!0,e=this.computeInitialScrollState(e),this.forceScrollState(e),this.isResourcesSet?(this.isResourcesRendered||(this.renderStoredResources(),this.isResourcesRendered=!0),this.triggerRender()):this.calendar.resourceManager.get(function(t){return function(e){return t.displayResources(e),t.triggerRender()}}(this))},e.prototype.clear=function(){return this.isDisplayed?(this.unselect(),this.clearEvents(),this.triggerDestroy(),this.destroyBusinessHours(),this.destroy(),this.isDisplayed=!1):void 0},e.prototype.destroySkeleton=function(){return this.isResourcesRendered&&(this.destroyStoredResources(),this.isResourcesRendered=!1),e.__super__.destroySkeleton.apply(this,arguments)},e.prototype.displayEvents=function(t){return this.calendar.resourceManager.get(function(i){return function(){return e.__super__.displayEvents.call(i,t),i.storedEvents=t}}(this))},e.prototype.clearEvents=function(){return e.__super__.clearEvents.apply(this,arguments),this.storedEvents=null},e.prototype.displayResources=function(t){var e;return e=this.storedEvents,this.clearResources(),this.setResources(t),this.isResourcesSet=!0,this.renderStoredResources(),this.isResourcesRendered=!0,e?this.displayEvents(e):void 0},e.prototype.clearResources=function(){return this.clearEvents(),this.isResourcesRendered&&(this.destroyStoredResources(),this.isResourcesRendered=!1),this.isResourcesSet?(this.unsetResources(),this.isResourcesSet=!1):void 0},e.prototype.setResources=function(){},e.prototype.unsetResources=function(){},e.prototype.renderStoredResources=function(){},e.prototype.destroyStoredResources=function(){},e}(x),H=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return se(i,e),i.defaults={enableParentResources:!0,eventResizableFromStart:!0},i.prototype.resourceGrid=null,i.prototype.timeGrid=null,i.prototype.joiner=null,i.prototype.dividerEls=null,i.prototype.enableParentResources=null,i.prototype.initialize=function(){return this.resourceGrid=new f(this),this.timeGrid=new C(this),this.explicitDuration=this.timeGrid.duration,this.coordMap=this.timeGrid.coordMap,this.enableParentResources=this.opt("enableParentResources")},i.prototype.setRange=function(t){return i.__super__.setRange.apply(this,arguments),this.timeGrid.setRange(t)},i.prototype.renderSkeleton=function(){var e;return this.el.addClass("fc-timeline"),this.opt("eventOverlap")===!1&&this.el.addClass("fc-no-overlap"),this.el.html('<table> <thead class="fc-head"> <tr> <td class="fc-resource-area '+this.widgetHeaderClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-resource-area '+this.widgetContentClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'),this.dividerEls=this.el.find(".fc-divider"),this.resourceGrid.el=this.el.find("tbody .fc-resource-area"),this.resourceGrid.headEl=this.el.find("thead .fc-resource-area"),this.resourceGrid.renderSkeleton(),this.timeGrid.setElement(this.el.find("tbody .fc-time-area")),this.timeGrid.headEl=this.el.find("thead .fc-time-area"),this.timeGrid.renderSkeleton(),this.joiner=new E("vertical",[this.resourceGrid.bodyScroller,this.timeGrid.bodyScroller]),this.timeGrid.bodyScroller.on("scroll",t.proxy(this,"handleBodyScroll")),this.dividerWidth=null!=(e=this.opt("resourceAreaWidth"))?e:this.resourceGrid.tableWidth,null!=this.dividerWidth&&this.positionDivider(this.dividerWidth),this.initDividerMoving()},i.prototype.isScrolled=!1,i.prototype.handleBodyScroll=function(t){if(t){if(!this.isScrolled)return this.isScrolled=!0,this.el.addClass("fc-scrolled")}else if(this.isScrolled)return this.isScrolled=!1,this.el.removeClass("fc-scrolled")},i.prototype.destroySkeleton=function(){return this.timeGrid.removeElement(),this.handleBodyScroll(0),i.__super__.destroySkeleton.apply(this,arguments)},i.prototype.renderDates=function(){return this.timeGrid.renderDates()},i.prototype.destroyDates=function(){return this.timeGrid.destroyDates()},i.prototype.renderBusinessHours=function(){return this.timeGrid.renderBusinessHours()},i.prototype.destroyBusinessHours=function(){return this.timeGrid.destroyBusinessHours()},i.prototype.initDividerMoving=function(){return this.dividerEls.on("mousedown",function(t){return function(e){return t.dividerMousedown(e)}}(this))},i.prototype.dividerWidth=null,i.prototype.dividerMousedown=function(t){var e,i,r,n,s;return i=this.opt("isRTL"),n=30,r=this.el.width()-30,s=this.getNaturalDividerWidth(),e=new o({dragStart:function(t){return function(){return t.dividerEls.addClass("fc-active")}}(this),drag:function(t){return function(e){var o;return o=i?s-e:s+e,o=Math.max(o,n),o=Math.min(o,r),t.dividerWidth=o,t.positionDivider(o),t.updateWidth()}}(this),dragStop:function(t){return function(){return t.dividerEls.removeClass("fc-active")}}(this)}),e.mousedown(t)},i.prototype.getNaturalDividerWidth=function(){return this.el.find(".fc-resource-area").width()},i.prototype.positionDivider=function(t){return this.el.find(".fc-resource-area").width(t)},i.prototype.updateSize=function(t){return t&&this.syncRowHeights(),i.__super__.updateSize.apply(this,arguments)},i.prototype.updateWidth=function(){return this.resourceGrid.updateWidth(),this.timeGrid.updateWidth(),this.joiner.update()},i.prototype.setHeight=function(t,e){var i,r,n;return r=this.syncHeadHeights(),n=this.el.outerHeight()-Math.max(this.resourceGrid.headScroller.el.outerHeight(),this.timeGrid.headScroller.el.outerHeight())-Math.max(this.resourceGrid.bodyScroller.el.outerHeight(),this.timeGrid.bodyScroller.el.outerHeight()),i=e?"auto":t-r-n,this.timeGrid.bodyScroller.height(i),this.resourceGrid.bodyScroller.height(i)},i.prototype.syncHeadHeights=function(){var t;return this.resourceGrid.headHeight("auto"),this.timeGrid.headHeight("auto"),t=Math.max(this.resourceGrid.headHeight(),this.timeGrid.headHeight()),this.resourceGrid.headHeight(t),this.timeGrid.headHeight(t),t},i.prototype.computeInitialScrollState=function(t){return this.timeGrid.computeInitialScrollState(t)},i.prototype.queryScrollState=function(){return this.timeGrid.queryScrollState()},i.prototype.setScrollState=function(t){return this.timeGrid.setScrollState(t)},i.prototype.setResources=function(t){return this.resourceGrid.setResources(t),this.timeGrid.setResources(t)},i.prototype.unsetResources=function(){return this.resourceGrid.unsetResources(),this.timeGrid.unsetResources()},i.prototype.renderStoredResources=function(){return this.resourceGrid.renderStoredResources(),this.timeGrid.renderStoredResources(),this.syncRowHeights(),this.updateWidth()},i.prototype.destroyStoredResources=function(){return this.resourceGrid.destroyStoredResources(),this.timeGrid.destroyStoredResources(),this.updateWidth()},i.prototype.reportExpandedResourceRow=function(t){var e;return e=this.timeGrid.expandRowById(t.id),this.syncSpecificRowHeights(t.gatherVisible(),e.gatherVisible()),this.updateWidth()},i.prototype.reportCollapsedResourceRow=function(t){return this.timeGrid.collapseRowById(t.id),this.updateWidth()},i.prototype.syncRowHeights=function(){return this.syncSpecificRowHeights(this.resourceGrid.getVisibleRows(),this.timeGrid.visibleRows)},i.prototype.syncSpecificRowHeights=function(t,e,i){var r,n,o,s,l,a,u,h,c,d,p,f;for(null==i&&(i=!1),a=c=0,p=e.length;p>c;a=++c)h=e[a],u=t[a],u.innerEl.css("height",""),h.innerEl.css("height","");for(l=function(){var s,l,c;for(c=[],a=s=0,l=e.length;l>s;a=++s)h=e[a],u=t[a],n=u.height(),o=h.height(),r=Math.max(n,o),i&&(r+=r%2),c.push(r);return c}(),a=d=0,f=e.length;f>d;a=++d)h=e[a],s=l[a],u=t[a],u.innerEl.css("height",s),h.innerEl.css("height",s);return!i&&(n=u.el.parent().height(),o=h.el.parent().height(),Math.abs(n-o)>1)?this.syncSpecificRowHeights(t,e,!0):void 0},i.prototype.renderEvents=function(t){var e,i,r,n;for(this.events=t,this.timeGrid.renderEvents(t),n=this.timeGrid.adHocRows,i=0,r=n.length;r>i;i++)e=n[i],this.resourceGrid.addAdHocRow(e.id);return this.syncRowHeights(),this.updateWidth()},i.prototype.destroyEvents=function(){return this.timeGrid.destroyEvents(),this.timeGrid.removeAdHocRows(),this.resourceGrid.removeAdHocRows(),this.syncRowHeights(),this.updateWidth()},i.prototype.renderDrag=function(t,e){return this.timeGrid.renderDrag(t,e)},i.prototype.destroyDrag=function(){return this.timeGrid.destroyDrag()},i.prototype.getEventSegs=function(){return this.timeGrid.getEventSegs()},i.prototype.renderSelection=function(t){return this.timeGrid.renderSelection(t)},i.prototype.destroySelection=function(){return this.timeGrid.destroySelection()},i}(m),s.views.timeline=H,s.views.timelineDay={type:"timeline",duration:{days:1}},s.views.timelineWeek={type:"timeline",duration:{weeks:1}},s.views.timelineMonth={type:"timeline",duration:{months:1}},s.views.timelineYear={type:"timeline",duration:{years:1}},l.prototype.getEventSkinCss=function(t){var e,i,r,n,o,s,l,a,u,h,c;return c=this.view,u=t.source||{},e=t.color,h=u.color,o=c.opt("eventColor"),s=null,a=c.calendar.resourceManager,a&&(l=a.getEventResourceId(t),l&&(s=a.getResourceById(l))),i=function(){var t,e;for(e=null,t=s;t&&!e;)e=t.eventBackgroundColor||t.eventColor,t=t._parent;return e},r=function(){var t,e;for(e=null,t=s;t&&!e;)e=t.eventBorderColor||t.eventColor,t=t._parent;return e},n=function(){var t,e;for(e=null,t=s;t&&!e;)e=t.eventTextColor,t=t._parent;return e},{"background-color":t.backgroundColor||e||i()||u.backgroundColor||h||c.opt("eventBackgroundColor")||o,"border-color":t.borderColor||e||r()||u.borderColor||h||c.opt("eventBorderColor")||o,color:t.textColor||n()||u.textColor||c.opt("eventTextColor")}},y=function(){function e(t,e,i){var r;this.grid=t,this.resource=null!=e?e:null,this.depth=null!=i?i:0,this.resource?(this.id=this.resource.id,this.children=function(){var e,i,n,o;for(n=this.resource.children,o=[],e=0,i=n.length;i>e;e++)r=n[e],o.push(new this.constructor(t,r,this.depth+1));return o}.call(this)):this.children=[]}return e.prototype.grid=null,e.prototype.id="",e.prototype.depth=null,e.prototype.resource=null,e.prototype.children=null,e.prototype.el=null,e.prototype.innerEl=null,e.prototype.extraVSpace=0,e.prototype.isVisible=!1,e.prototype.isExpanded=!0,e.prototype.isContentRendered=!1,e.prototype.render=function(e){var i,r,n,o,s,l,a;if(this.el=t("<tr/>").appendTo(e),this.ensureContentRendered(),this.isVisible=!0,this.isExpanded)for(l=this.children,r=0,o=l.length;o>r;r++)i=l[r],i.render(e);else for(a=this.children,n=0,s=a.length;s>n;n++)i=a[n],i.el=t("<tr/>").hide().appendTo(e);return this.isExpanded?this.indicateExpanded():this.indicateCollapsed(),this.isDisabledParent()?this.el.addClass("fc-divider fc-disabled-parent"):void 0},e.prototype.isDisabledParent=function(){return!this.grid.view.enableParentResources&&Boolean(this.children.length)},e.prototype.ensureContentRendered=function(){return this.isContentRendered?void 0:(this.renderContent(),this.innerEl=this.el.find("> td:first-child > div"),this.isContentRendered=!0)},e.prototype.renderContent=function(){},e.prototype.destroy=function(){var t,e,i,r,n;for(this.el.remove(),this.el=null,this.isContentRendered=!1,r=this.children,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.destroy());return n},e.prototype.show=function(){var t,e,i,r,n;if(this.el.css("display",""),this.isVisible=!0,this.ensureContentRendered(),this.isExpanded){for(r=this.children,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.show());return n}},e.prototype.hide=function(){var t,e,i,r,n;for(this.el.hide(),this.isVisible=!1,r=this.children,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.hide());return n},e.prototype.height=function(){return this.innerEl.height.apply(this.innerEl,arguments)},e.prototype.toggleExpanded=function(){return this.isExpanded?this.collapse():this.expand()},e.prototype.expand=function(){var t,e,i,r;if(!this.isExpanded){for(this.isExpanded=!0,this.indicateExpanded(),r=this.children,e=0,i=r.length;i>e;e++)t=r[e],t.show();return this.reportExpanded()}},e.prototype.collapse=function(){var t,e,i,r;if(this.isExpanded){for(this.isExpanded=!1,this.indicateCollapsed(),r=this.children,e=0,i=r.length;i>e;e++)t=r[e],t.hide();return this.reportCollapsed()}},e.prototype.indicateExpanded=function(){},e.prototype.indicateCollapsed=function(){},e.prototype.reportExpanded=function(){},e.prototype.reportCollapsed=function(){},e.prototype.gather=function(t){var e,i,r,n;for(null==t&&(t=[]),t.push(this),n=this.children,i=0,r=n.length;r>i;i++)e=n[i],e.gather(t);return t},e.prototype.gatherVisible=function(t){var e,i,r,n;if(null==t&&(t=[]),t.push(this),this.isExpanded)for(n=this.children,i=0,r=n.length;r>i;i++)e=n[i],e.gatherVisible(t);return t},e.prototype.gatherById=function(t){var e,i,r,n;for(null==t&&(t={}),this.id&&(t[this.id]=this),n=this.children,i=0,r=n.length;r>i;i++)e=n[i],e.gatherById(t);return t},e}(),i=30,f=function(){function e(t){this.view=t,this.isRTL=this.view.opt("isRTL"),this.populateColSpec()}return e.prototype.view=null,e.prototype.colSpec=null,e.prototype.superHeaderText=null,e.prototype.topLevelRows=null,e.prototype.rowHash=null,e.prototype.isNesting=!1,e.prototype.headEl=null,e.prototype.el=null,e.prototype.tbodyEl=null,e.prototype.headScroller=null,e.prototype.bodyScroller=null,e.prototype.joiner=null,e.prototype.follower=null,e.prototype.populateColSpec=function(){var e,i,r,n,o,s,l;return e=this.view.opt("resourceColumns"),o=this.view.opt("resourceLabelText"),i="Resources",e&&e.length?(this.colSpec=function(){var i,o,s;for(s=[],r=i=0,o=e.length;o>i;r=++i)n=e[r],"object"!==t.type(n)&&(n={field:n}),null==n.labelText&&(n.labelText=n.field||""),s.push(n);return s}(),this.superHeaderText=o):(l={labelText:o||i},s=this.view.opt("resourceText"),l.text=s?s:function(t,e){return t?t.title:e},this.colSpec=[l]),this.givenColWidths=this.colWidths=function(){var t,e,i,r;for(i=this.colSpec,r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(n.width);return r}.call(this)},e.prototype.colGroupHtml="",e.prototype.headTable=null,e.prototype.headColEls=null,e.prototype.headCellEls=null,e.prototype.bodyColEls=null,e.prototype.bodyTable=null,e.prototype.renderSkeleton=function(){return this.headScroller=new R("invisible-scroll","hidden"),this.headScroller.contentEl.html(this.renderHeadHtml()),this.headEl.append(this.headScroller.el),this.bodyScroller=new R("auto","invisible-scroll"),this.bodyScroller.contentEl.html("<table>"+this.colGroupHtml+"<tbody/></table>"),this.tbodyEl=this.bodyScroller.contentEl.find("tbody"),this.el.append(this.bodyScroller.el),this.joiner=new E("horizontal",[this.headScroller,this.bodyScroller]),this.follower=new S(this.headScroller),this.follower.setSprites(this.headEl.find("tr:first-child span")),this.headTable=this.headEl.find("table"),this.headColEls=this.headEl.find("col"),this.headCellEls=this.headScroller.contentEl.find("tr:last-child th"),this.bodyColEls=this.el.find("col"),this.bodyTable=this.el.find("table"),this.colMinWidths=this.computeColMinWidths(),this.applyColWidths(),this.initColResizing()},e.prototype.renderHeadHtml=function(){var t,e,i,r,n,o,s,l,a,u,h;for(e=this.colSpec,i="<table>",t="<colgroup>",l=0,u=e.length;u>l;l++)s=e[l],t+="<col/>";for(t+="</colgroup>",this.colGroupHtml=t,i+=t,i+="<tbody>",this.superHeaderText&&(i+='<tr class="fc-super"><th class="'+this.view.widgetHeaderClass+'" colspan="'+e.length+'">'+'<div class="fc-cell-content">'+'<span class="fc-cell-text">'+N(this.superHeaderText)+"</span>"+"</div>"+"</th>"+"</tr>"),i+="<tr>",r=a=0,h=e.length;h>a;r=++a)s=e[r],n=0===r,o=r===e.length-1,i+='<th class="'+this.view.widgetHeaderClass+'">'+"<div>"+'<div class="fc-cell-content">'+(n?'<div class="fc-icon" style="display:none" />':"")+'<span class="fc-cell-text">'+N(s.labelText||"")+"</span>"+"</div>"+(o?"":'<div class="fc-col-resizer"></div>')+"</div>"+"</th>";return i+="</tr>",i+="</tbody></table>"},e.prototype.givenColWidths=null,e.prototype.colWidths=null,e.prototype.colMinWidths=null,e.prototype.tableWidth=null,e.prototype.tableMinWidth=null,e.prototype.initColResizing=function(){return this.headEl.find("th .fc-col-resizer").each(function(e){return function(i,r){return r=t(r),r.on("mousedown",function(t){return e.colResizeMousedown(i,t,r)})}}(this))},e.prototype.colResizeMousedown=function(t,e,r){var n,s,l,a;return n=this.colWidths=this.queryColWidths(),n.pop(),n.push("auto"),a=n[t],l=Math.min(this.colMinWidths[t],i),s=new o({dragStart:function(){return function(){return r.addClass("fc-active")}}(this),drag:function(e){return function(i){var r;return r=a+(e.isRTL?-i:i),r=Math.max(r,l),n[t]=r,e.applyColWidths(),e.follower?e.follower.forceAbsolute():void 0}}(this),dragStop:function(t){return function(){return r.removeClass("fc-active"),t.follower?(t.follower.clearForce(),t.follower.update()):void 0}}(this)}),s.mousedown(e)},e.prototype.applyColWidths=function(){var t,e,i,r,n,o,s,l,a,u,h,c,d,p,f,g,v;for(i=this.colMinWidths,n=this.colWidths,t=!0,e=!1,h=0,c=0,f=n.length;f>c;c++)r=n[c],"number"==typeof r?h+=r:(t=!1,r&&(e=!0));for(l=e?"auto":"",s=function(){var t,e,i;for(i=[],a=t=0,e=n.length;e>t;a=++t)r=n[a],i.push(null!=r?r:l);return i}(),u=0,a=d=0,g=s.length;g>d;a=++d)o=s[a],u+="number"==typeof o?o:i[a];for(a=p=0,v=s.length;v>p;a=++p)o=s[a],this.headColEls.eq(a).width(o),this.bodyColEls.eq(a).width(o);return this.headScroller.sizeEl.add(this.bodyScroller.sizeEl).css({minWidth:u}),this.tableMinWidth=u,this.tableWidth=t?h:void 0},e.prototype.computeColMinWidths=function(){var t,e,r,n,o,s;for(o=this.givenColWidths,s=[],t=r=0,n=o.length;n>r;t=++r)e=o[t],"number"==typeof e?s.push(e):s.push(parseInt(this.headColEls.eq(t).css("min-width"))||i);return s},e.prototype.queryColWidths=function(){var e,i,r,n,o;for(n=this.headCellEls,o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(t(e).outerWidth());return o},e.prototype.updateWidth=function(){return this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.follower?this.follower.update():void 0},e.prototype.headHeight=function(){var t;return t=this.headScroller.contentEl.find("table"),t.height.apply(t,arguments)},e.prototype.setResources=function(t){var e,i,r,n,o,s,l;for(e=!1,this.topLevelRows=function(){var r,n,o;for(o=[],r=0,n=t.length;n>r;r++)i=t[r],e||(e=i.children.length),o.push(new v(this,i));return o}.call(this),r={},l=this.topLevelRows,o=0,s=l.length;s>o;o++)n=l[o],n.gatherById(r);return this.rowHash=r,this.isNesting=Boolean(e)},e.prototype.unsetResources=function(){return this.topLevelRows=null},e.prototype.renderStoredResources=function(){var t,e,i,r;for(r=this.topLevelRows,e=0,i=r.length;i>e;e++)t=r[e],this.renderRow(t);return this.el.add(this.headEl).toggleClass("fc-nested",this.isNesting),this.headEl.find(".fc-icon").toggle(this.isNesting),this.applyColWidths()},e.prototype.destroyStoredResources=function(){var t,e,i,r;for(r=this.topLevelRows,e=0,i=r.length;i>e;e++)t=r[e],t.destroy();return this.el.add(this.headEl).removeClass("fc-nested")},e.prototype.renderRow=function(t){return t.render(this.tbodyEl)},e.prototype.reportExpandedRow=function(t){return this.view.reportExpandedResourceRow(t)},e.prototype.reportCollapsedRow=function(t){return this.view.reportCollapsedResourceRow(t)},e.prototype.addAdHocRow=function(t){var e;return e=new v(this),e.id=t,this.topLevelRows.push(e),this.renderRow(e),e},e.prototype.removeAdHocRows=function(){var t,e,i,r,n;for(t=[],n=this.topLevelRows,i=0,r=n.length;r>i;i++)e=n[i],e.resource?t.push(e):e.destroy();return this.topLevelRows=t},e.prototype.setRowHeights=function(t){var e,i,r,n,o,s;for(r=this.getVisibleRows(),s=[],i=n=0,o=t.length;o>n;i=++n)e=t[i],s.push(r[i].setHeight(e));return s},e.prototype.getVisibleRows=function(){var t,e,i,r,n;for(e=[],n=this.topLevelRows,i=0,r=n.length;r>i;i++)t=n[i],t.gatherVisible(e);return e},e}(),v=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return se(i,e),i.prototype.renderContent=function(){var e,i,r,n,o,s,l,a,u,h,c,d;if(r="",this.grid.isNesting){for(n=a=0,c=this.depth;c>=0?c>a:a>c;n=c>=0?++a:--a)r+='<span class="fc-icon"/>';r+=this.children.length?'<span class="fc-icon fc-expander"/>':'<span class="fc-icon"/>'}for(e=this.grid.colSpec,d=[],n=u=0,h=e.length;h>u;n=++u){if(i=e[n],s=t('<td class="'+this.grid.view.widgetContentClass+'"/>'),o=t('<span class="fc-cell-text" />').appendTo(s),l="",i.text?l="function"==typeof i.text?i.field&&this.resource?i.text(this.resource[i.field],this.id):i.text(this.resource,this.id):i.text:i.field&&this.resource&&(l=this.resource[i.field]),l?o.text(l):o.html("&nbsp;"),n?s.wrapInner('<div class="fc-cell-content"/>'):(r&&(s.prepend(r),s.find(".fc-expander").on("click",function(t){return function(){return t.toggleExpanded()}}(this))),s.wrapInner('<div class="fc-cell-content"/>'),s.wrapInner("<div/>")),this.el.append(s),this.isDisabledParent()){s.attr("colspan",e.length);break}d.push(void 0)}return d},i.prototype.setColWidths=function(){},i.prototype.indicateExpanded=function(){var t;return t=this.grid.isRTL?"left":"right",this.el.find(".fc-expander").removeClass("fc-icon-"+t+"-triangle").addClass("fc-icon-down-triangle")},i.prototype.indicateCollapsed=function(){var t;return t=this.grid.isRTL?"left":"right",this.el.find(".fc-expander").removeClass("fc-icon-down-triangle").addClass("fc-icon-"+t+"-triangle")},i.prototype.reportExpanded=function(){return this.grid.reportExpandedRow(this)},i.prototype.reportCollapsed=function(){return this.grid.reportCollapsedRow(this)},i}(y),C=function(i){function r(){var t;r.__super__.constructor.apply(this,arguments),this.initScaleProps(),this.minTime=e.duration(this.opt("minTime")||"00:00"),this.maxTime=e.duration(this.opt("maxTime")||"24:00"),this.snapDuration=(t=this.opt("snapDuration"))?e.duration(t):this.slotDuration,this.cellDuration=this.snapDuration,this.colsPerSlot=W(this.slotDuration,this.snapDuration),this.slotWidth=this.opt("slotWidth")}return se(r,i),r.prototype.topLevelRows=null,r.prototype.allRows=null,r.prototype.visibleRows=null,r.prototype.adHocRows=null,r.prototype.slotDates=null,r.prototype.headEl=null,r.prototype.slatContainerEl=null,r.prototype.tbodyEl=null,r.prototype.slatEls=null,r.prototype.slatElCoords=null,r.prototype.headScroller=null,r.prototype.bodyScroller=null,r.prototype.joiner=null,r.prototype.follower=null,r.prototype.eventTitleFollower=null,r.prototype.minTime=null,r.prototype.maxTime=null,r.prototype.slotDuration=null,r.prototype.snapDuration=null,r.prototype.slotCnt=null,r.prototype.snapDiffToCol=null,r.prototype.colToSnapDiff=null,r.prototype.colsPerSlot=null,r.prototype.duration=null,r.prototype.labelInterval=null,r.prototype.headerFormats=null,r.prototype.isTimeScale=null,r.prototype.emphasizeWeeks=!1,r.prototype.opt=function(t){return this.view.opt(t)},r.prototype.isValidDate=function(t){var e;return this.view.isHiddenDay(t)?!1:this.isTimeScale?(e=t.time(),e>=this.minTime&&this.maxTime>e):!0},r.prototype.computeDisplayEventTime=function(){return!this.isTimeScale},r.prototype.computeDisplayEventEnd=function(){return!1},r.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},r.prototype.normalizeGridDate=function(t){return this.isTimeScale?this.view.calendar.rezoneDate(t):this.largeUnit?t.clone().startOf(this.largeUnit):t.clone().stripTime()},r.prototype.setRange=function(){var t,e;for(r.__super__.setRange.apply(this,arguments),this.start=this.normalizeGridDate(this.start),this.end=this.normalizeGridDate(this.end),e=[],t=this.start.clone();this.end>t;)this.isValidDate(t)&&e.push(t.clone()),t.add(this.slotDuration);return this.slotDates=e},r.prototype.updateCells=function(){var t,e,i,r,n;for(t=-1,n=0,r=[],e=[],i=this.start.clone();this.end>i;)this.isValidDate(i)?(t++,r.push(t),e.push(n)):r.push(t+.5),i.add(this.snapDuration),n++;return this.snapDiffToCol=r,this.colToSnapDiff=e,this.colCnt=t+1},r.prototype.getRowData=function(t){return{resourceId:this.visibleRows[t].id}},r.prototype.getCellDayEl=function(t){return this.slatEls.eq(Math.floor(t.col/this.colsPerSlot))},r.prototype.computeColCoords=function(){var t,e;for(t=[],e=this.start.clone();this.end>e;)this.isValidDate(e)&&t.push(this.rangeToOffsets({start:e,end:e.clone().add(this.snapDuration)})),e.add(this.snapDuration);return t},r.prototype.getRowEl=function(t){return this.visibleRows[t].el},r.prototype.computeCellRange=function(t){var e,i;return i=this.start.clone(),i.add(X(this.snapDuration,this.colToSnapDiff[t.col])),e=i.clone().add(this.snapDuration),{start:i,end:e}},r.prototype.rangeToSegs=function(t){var e,i,r,n;return this.isTimeScale?r=t:(r=this.view.computeDayRange(t),this.largeUnit&&(i=r.start.clone().startOf(this.largeUnit),e=r.end.clone().startOf(this.largeUnit),e.isSame(r.end)&&e.isAfter(i)||e.add(this.slotDuration),r={start:i,end:e})),n=Z(r,this.view),n?(n.isStart&&!this.isValidDate(n.start)&&(n.isStart=!1),n.isEnd&&n.end&&!this.isValidDate(n.end.clone().subtract(1))&&(n.isEnd=!1),t.resourceId?n.resourceId=t.resourceId:t.event&&(n.resourceId=this.view.calendar.getEventResourceId(t.event)),[n]):[]},r.prototype.renderSkeleton=function(){var e;return this.headScroller=new R("invisible-scroll","hidden"),this.headEl.append(this.headScroller.el),this.bodyScroller=new R,this.slatContainerEl=t('<div class="fc-slats"/>').appendTo(this.bodyScroller.contentEl),e=t('<div class="fc-rows"><table><tbody/></table></div>').appendTo(this.bodyScroller.contentEl),this.tbodyEl=e.find("tbody"),this.el.append(this.bodyScroller.el),this.coordMap.containerEl=this.bodyScroller.scrollEl,this.joiner=new E("horizontal",[this.headScroller,this.bodyScroller]),this.follower=new S(this.headScroller),this.eventTitleFollower=new S(this.bodyScroller),this.eventTitleFollower.minTravel=50,this.isRTL?this.eventTitleFollower.containOnNaturalRight=!0:this.eventTitleFollower.containOnNaturalLeft=!0,r.__super__.renderSkeleton.apply(this,arguments)},r.prototype.headColEls=null,r.prototype.slatColEls=null,r.prototype.renderDates=function(){var t,e,i,r,n;for(this.headScroller.contentEl.html(this.renderHeadHtml()),this.headColEls=this.headScroller.contentEl.find("col"),this.slatContainerEl.html(this.renderSlatHtml()),this.slatColEls=this.slatContainerEl.find("col"),this.slatEls=this.slatContainerEl.find("td"),n=this.slotDates,e=i=0,r=n.length;r>i;e=++i)t=n[e],this.view.trigger("dayRender",null,t,this.slatEls.eq(e));return this.follower?this.follower.setSprites(this.headEl.find("tr:not(:last-child) span")):void 0},r.prototype.destroyDates=function(){return this.follower&&this.follower.destroySprites(),this.headScroller.contentEl.empty(),this.slatContainerEl.empty(),this.headScroller.sizeEl.add(this.bodyScroller.sizeEl).css({minWidth:"",width:""})},r.prototype.renderHeadHtml=function(){var t,e,i,r,n,o,s,l,a,u,h,c,d,p,f,g,v,m,y,w,S,b,E,D,R,C,T,H,x,k,M,F,_,G,z,L;for(c=this.labelInterval,n=this.headerFormats,e=function(){var t,e,i;
for(i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push([]);return i}(),d=null,f=null,w=this.slotDates,y=[],E=0,T=w.length;T>E;E++){for(i=w[E],b=i.week(),h=this.emphasizeWeeks&&null!==f&&f!==b,g=D=0,H=n.length;H>D;g=++D)r=n[g],v=e[g],d=v[v.length-1],u=n.length>1&&n.length-1>g,p=null,u?(S=i.format(r),d&&d.text===S?d.colspan+=1:p={text:S,colspan:1}):!d||q(P(this.start,i,c))?(S=i.format(r),p={text:S,colspan:1}):d.colspan+=1,p&&(p.weekStart=h,v.push(p));y.push({weekStart:h}),f=b}for(l=c>this.slotDuration,o="<table>",o+="<colgroup>",R=0,x=w.length;x>R;R++)i=w[R],o+="<col/>";for(o+="</colgroup>",o+="<tbody>",s=C=0,k=e.length;k>C;s=++C){for(v=e[s],a=s===e.length-1,o+="<tr"+(l&&a?' class="fc-chrono"':"")+">",G=0,M=v.length;M>G;G++)t=v[G],o+='<th class="'+this.view.widgetHeaderClass+" "+(t.weekStart?"fc-em-cell":"")+'"'+(t.colspan>1?' colspan="'+t.colspan+'"':"")+">"+'<div class="fc-cell-content">'+'<span class="fc-cell-text">'+N(t.text)+"</span>"+"</div>"+"</th>";o+="</tr>"}for(o+="</tbody></table>",m="<table>",m+="<colgroup>",z=0,F=y.length;F>z;z++)t=y[z],m+="<col/>";for(m+="</colgroup>",m+="<tbody><tr>",s=L=0,_=y.length;_>L;s=++L)t=y[s],i=w[s],m+=this.slatCellHtml(i,t.weekStart);return m+="</tr></tbody></table>",this._slatHtml=m,o},r.prototype.renderSlatHtml=function(){return this._slatHtml},r.prototype.slatCellHtml=function(t,e){var i;return this.isTimeScale?(i=[],i.push(0===(t-this.start)%this.labelInterval?"fc-major":"fc-minor")):(i=this.getDayClasses(t),i.push("fc-day")),i.unshift(this.view.widgetContentClass),e&&i.push("fc-em-cell"),'<td class="'+i.join(" ")+'"'+' data-date="'+t.format()+'"'+"><div /></td>"},r.prototype.businessHourSegs=null,r.prototype.renderBusinessHours=function(){var t,e;return this.largeUnit?void 0:(t=this.view.calendar.getBusinessHoursEvents(!this.isTimeScale),e=this.businessHourSegs=this.eventsToSegs(t),this.renderFill("businessHours",e,"bgevent"))},r.prototype.destroyBusinessHours=function(){return this.destroyFill("businessHours")},r.prototype.explicitSlotWidth=null,r.prototype.defaultSlotWidth=null,r.prototype.updateWidth=function(){var t,e,i,r,n;return n=Math.round(this.slotWidth||(this.slotWidth=this.computeSlotWidth())),i=n*this.slotDates.length,e="",r=n,t=this.bodyScroller.scrollEl[0].clientWidth,t>i&&(e=t,i="",r=Math.floor(t/this.slotDates.length)),this.headScroller.sizeEl.add(this.bodyScroller.sizeEl).css({minWidth:e,width:i}),this.headColEls.slice(0,-1).add(this.slatColEls.slice(0,-1)).width(r),this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.updateSlatElCoords(),this.updateSegPositions(),this.follower&&this.follower.update(),this.eventTitleFollower?this.eventTitleFollower.update():void 0},r.prototype.computeSlotWidth=function(){var e,i,r,n,o,s;return r=0,i=this.headEl.find("tr:last-child th span"),i.each(function(e,i){var n;return n=t(i).outerWidth(),r=Math.max(r,n)}),e=r+1,s=W(this.labelInterval,this.slotDuration),o=Math.ceil(e/s),n=this.headColEls.eq(0).css("min-width"),n&&(n=parseInt(n,10),n&&(o=Math.max(o,n))),o},r.prototype.updateSlatElCoords=function(){var e,i,r,n,o,s;return i=this.slatEls.find("> div"),o=this.bodyScroller.sizeEl,this.isRTL?(n=o.offset().left+o.outerWidth(),e=function(){var e,o,l;for(l=[],r=e=0,o=i.length;o>e;r=++e)s=i[r],l.push(t(s).offset().left+t(s).outerWidth()-n);return l}(),e[r]=t(s).offset().left-n):(n=o.offset().left,e=function(){var e,o,l;for(l=[],r=e=0,o=i.length;o>e;r=++e)s=i[r],l.push(t(s).offset().left-n);return l}(),e[r]=t(s).offset().left+t(s).outerWidth()-n),this.slatElCoords=e},r.prototype.dateToCol=function(t){var e,i,r,n;return i=P(this.start,t,this.snapDuration),0>i?0:i>=this.snapDiffToCol.length?this.colCnt:(r=Math.floor(i),n=i-r,e=this.snapDiffToCol[r],q(e)&&n&&(e+=n),e)},r.prototype.dateToCoord=function(t){var e,i,r,n,o,s,l,a;return e=this.dateToCol(t),a=e/this.colsPerSlot,a=Math.max(a,0),a=Math.min(a,this.slotDates.length),q(a)?this.slatElCoords[a]:(n=Math.floor(a),o=+this.slotDates[n],s=+this.slotDates[n].clone().add(this.slotDuration),l=(t-o)/(s-o),l=Math.min(l,1),i=this.slatElCoords[n],r=this.slatElCoords[n+1],i+(r-i)*l)},r.prototype.rangeToCoords=function(t){return this.isRTL?{right:this.dateToCoord(t.start),left:this.dateToCoord(t.end)}:{left:this.dateToCoord(t.start),right:this.dateToCoord(t.end)}},r.prototype.rangeToOffsets=function(t){var e,i;return e=this.rangeToCoords(t),i=this.isRTL?this.slatContainerEl.offset().left+this.slatContainerEl.outerWidth():this.slatContainerEl.offset().left,e.left+=i,e.right+=i,e},r.prototype.headHeight=function(){var t;return t=this.headScroller.contentEl.find("table"),t.height.apply(t,arguments)},r.prototype.updateSegPositions=function(){var t,e,i,r,n;for(i=(this.segs||[]).concat(this.businessHourSegs||[]),r=0,n=i.length;n>r;r++)e=i[r],t=this.rangeToCoords(e,-1),e.el.css({left:e.left=t.left,right:-(e.right=t.right)})},r.prototype.computeInitialScrollState=function(t){var i,r;return null==t&&(t={}),i=0,this.isTimeScale&&(r=this.opt("scrollTime"),r&&(r=e.duration(r),i=this.dateToCoord(this.start.clone().time(r)))),{left:i,topRowObj:t.topRowObj,topRowBottom:t.topRowBottom}},r.prototype.queryScrollState=function(){var t,e,i,r,n,o,s,l,a,u;for(n=this.bodyScroller.scrollEl,i=n.offset().top,s=null,u=this.visibleRows,l=0,a=u.length;a>l;l++)if(r=u[l],t=r.el,e=t.offset().top+t.outerHeight(),e>i){s=r,o=e-i;break}return{left:$(n),topRowObj:s,topRowBottom:o}},r.prototype.setScrollState=function(t){var e,i,r,n,o,s;return n=this.bodyScroller.scrollEl,o=null,s=t.topRowObj,s&&(r=this.bodyScroller.sizeEl.offset().top,e=s.el,e&&(i=e.offset().top+e.outerHeight(),o=i-t.topRowBottom-r)),null!=o&&n.scrollTop(o),null!=t.left?$(n,t.left):void 0},r.prototype.setResources=function(t){var e;return this.topLevelRows=function(){var i,r,n;for(n=[],i=0,r=t.length;r>i;i++)e=t[i],n.push(new T(this,e));return n}.call(this),this.adHocRows=[],this.populateRows()},r.prototype.unsetResources=function(){return this.topLevelRows=null,this.allRows=null,this.visibleRows=null,this.rowHash=null,this.adHocRows=null},r.prototype.renderStoredResources=function(){var t,e,i,r,n;for(r=this.topLevelRows,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(this.renderRow(t));return n},r.prototype.destroyStoredResources=function(){var t,e,i,r,n;for(r=this.topLevelRows,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.destroy());return n},r.prototype.renderRow=function(t){return t.render(this.tbodyEl)},r.prototype.expandRowById=function(t){var e;return e=this.rowHash[t],e&&(e.expand(),this.populateVisibleRows()),e},r.prototype.collapseRowById=function(t){var e;return e=this.rowHash[t],e&&(e.collapse(),this.populateVisibleRows()),e},r.prototype.addAdHocRow=function(t){var e;return e=new T(this),e.id=t,this.topLevelRows.push(e),this.allRows.push(e),this.visibleRows.push(e),this.rowCnt=this.visibleRows.length,this.rowHash[t]=e,this.adHocRows.push(e),this.renderRow(e),e},r.prototype.removeAdHocRows=function(){var t,e,i,r,n;for(t=[],n=this.topLevelRows,i=0,r=n.length;r>i;i++)e=n[i],e.resource?t.push(e):e.destroy();return this.topLevelRows=t,this.adHocRows=[],this.populateRows()},r.prototype.populateRows=function(){return this.populateAllRows(),this.populateVisibleRows(),this.populateRowHash()},r.prototype.populateAllRows=function(){var t,e,i,r,n;for(t=[],n=this.topLevelRows,i=0,r=n.length;r>i;i++)e=n[i],e.gather(t);return this.allRows=t},r.prototype.populateVisibleRows=function(){var t,e,i,r,n;for(e=[],n=this.topLevelRows,i=0,r=n.length;r>i;i++)t=n[i],t.gatherVisible(e);return this.visibleRows=e,this.rowCnt=e.length},r.prototype.populateRowHash=function(){var t,e,i,r,n;for(t={},n=this.topLevelRows,i=0,r=n.length;r>i;i++)e=n[i],e.gatherById(t);return this.rowHash=t},r.prototype.pairSegsWithRows=function(t){var e,i,r,n,o,s,l,a;for(i=[],r={},l=0,a=t.length;a>l;l++)s=t[l],n=s.resourceId||"",o=this.rowHash[n],o||(o=this.addAdHocRow(n)),e=r[n],e||(e=[o,[]],i.push(e),r[n]=e),e[1].push(s);return i},r.prototype.titleFollower=null,r.prototype.renderFgSegs=function(t){var e,i,r,n,o,s;if(t=this.renderFgSegEls(t),e=this.pairSegsWithRows(t),this.renderRowFgSegPairs(e),this.eventTitleFollower){for(r=[],o=0,s=t.length;s>o;o++)i=t[o],n=i.el.find(".fc-title"),n.length&&r.push(i.followerSprite=new b(n));this.eventTitleFollower.setSprites(r)}return t},r.prototype.hideSeg=function(){return this.eventTitleFollower&&this.eventTitleFollower.forceRelative(),r.__super__.hideSeg.apply(this,arguments)},r.prototype.showSeg=function(){return r.__super__.showSeg.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},r.prototype.renderRowFgSegs=function(t,e){return this.renderRowFgSegPairs([[t,e]])},r.prototype.renderRowFgSegPairs=function(t){var e,i,r,n,o,s,l,a,u,h,c,d,p,f,g,v,m,y,w,S,b,E,D;for(s=[],l=0,c=t.length;c>l;l++)i=t[l],r=i[0],o=i[1],r.isVisible?s.push(i):r.unrenderedFgSegs=o;for(a=0,d=s.length;d>a;a++)for(w=s[a],r=w[0],o=w[1],u=0,p=o.length;p>u;u++)n=o[u],e=this.rangeToCoords(n,-1),n.el.css({left:n.left=e.left,right:-(n.right=e.right)});for(h=0,f=s.length;f>h;h++)S=s[h],r=S[0],o=S[1],r.attachSegs(o);for(m=0,g=s.length;g>m;m++)b=s[m],r=b[0],o=b[1],r.computeSegVerticals(o);for(D=[],y=0,v=s.length;v>y;y++)E=s[y],r=E[0],o=E[1],D.push(r.assignSegVerticals(o));return D},r.prototype.fgSegHtml=function(t){var e,i,r,n,o,s;return i=t.event,r=this.view.isEventDraggable(i),o=t.isStart&&this.view.isEventResizableFromStart(i),n=t.isEnd&&this.view.isEventResizableFromEnd(i),e=this.getSegClasses(t,r,o||n),e.unshift("fc-timeline-event","fc-h-event"),s=this.getEventTimeText(t.event),'<div class="'+e.join(" ")+'" style="'+this.getEventSkinCssStr(t.event)+'">'+'<div class="fc-content">'+(s?'<span class="fc-time">'+N(s)+"</span>":"")+'<span class="fc-title">'+N(t.event.title)+"</span>"+"</div>"+'<div class="fc-bg" />'+(o?'<div class="fc-resizer fc-start-resizer"></div>':"")+(n?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</div>"},r.prototype.destroyFgSegs=function(){var t,e,i,r,n;for(this.eventTitleFollower&&this.eventTitleFollower.destroySprites(),r=this.allRows,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.destroyFgSegs());return n},r.prototype.helperEls=null,r.prototype.renderHelper=function(e,i){var r,n,o,s,l,a,u,h,c,d,p,f,g,v,m,y,w;for(o=[],u=this.eventsToSegs([e]),u=this.renderFgSegEls(u),s=this.pairSegsWithRows(u),h=0,f=s.length;f>h;h++)for(y=s[h],l=y[0],u=y[1],c=0,g=u.length;g>c;c++)a=u[c],r=this.rangeToCoords(a,-1),a.el.css({left:a.left=r.left,right:-(a.right=r.right)}),i&&i.resourceId===l.id?a.el.css("top",i.el.css("top")):a.el.css("top",0);for(d=0,v=s.length;v>d;d++)for(w=s[d],l=w[0],u=w[1],n=t('<div class="fc-event-container fc-helper-container"/>').appendTo(l.innerEl),o.push(n[0]),p=0,m=u.length;m>p;p++)a=u[p],n.append(a.el);return this.helperEls=t(o)},r.prototype.destroyHelper=function(){return this.helperEls?(this.helperEls.remove(),this.helperEls=null):void 0},r.prototype.renderEventResize=function(t,e){return t.resourceId=this.view.calendar.getEventResourceId(e.event),this.renderHighlight(t),this.renderRangeHelper(t,e)},r.prototype.destroyEventResize=function(){return this.destroyHighlight(),this.destroyHelper()},r.prototype.renderFill=function(t,e,i){var r,n,o,s,l,a,u,h,c,d,p;for(e=this.renderFillSegEls(t,e),o=[],r=[],u=0,c=e.length;c>u;u++)a=e[u],a.resourceId?o.push(a):r.push(a);for(n=this.pairSegsWithRows(o),h=0,d=n.length;d>h;h++)p=n[h],s=p[0],l=p[1],s.isVisible?this.renderRowFill(s,t,l,i):"bgEvent"===t&&(s.unrenderedBgSegs=l);return this.renderGlobalFill(t,r,i),e},r.prototype.renderRowFill=function(t,e,i){return this.renderFillInContainer(e,i,t.innerEl)},r.prototype.renderGlobalFill=function(t,e,i){return this.renderFillInContainer(t,e,this.bodyScroller.contentEl,i)},r.prototype.renderFillInContainer=function(e,i,r,n){var o,s,l,a,u;if(i.length){for(n||(n=e.toLowerCase()),o=t('<div class="fc-'+n+'-container" />').appendTo(r),a=0,u=i.length;u>a;a++)l=i[a],s=this.rangeToCoords(l,-1),l.el.css({left:l.left=s.left,right:-(l.right=s.right)}),l.el.appendTo(o);return this.elsByFill[e]=this.elsByFill[e]?this.elsByFill[e].add(o):o}},r.prototype.renderDrag=function(t,e){return e?(this.renderRangeHelper(t,e),!0):(this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t)),!1)},r.prototype.fabricateHelperEvent=function(t){var e;return e=r.__super__.fabricateHelperEvent.apply(this,arguments),e[this.opt("eventResourceProperty")||"resourceId"]=t.resourceId,e},r.prototype.destroyDrag=function(){return this.destroyHelper(),this.destroyHighlight()},r.prototype.computeEventDrop=function(t,e){var i,n,o,s;return e.resourceId?(i=!0,i||t.resourceId===e.resourceId?(s=this.rowHash[e.resourceId],s.isDisabledParent()?null:(o=r.__super__.computeEventDrop.apply(this,arguments),o&&(n=this.view.calendar.resourceManager.getEventResourceProperty(),o[n]=e.resourceId),o)):null):null},r.prototype.computeEventResize=function(t,e){var i,n;return n=r.__super__.computeEventResize.apply(this,arguments),n&&(i=this.view.calendar.resourceManager.getEventResourceProperty(),n[i]=e.resourceId),n},r.prototype.computeSelection=function(t){var e;return e=r.__super__.computeSelection.apply(this,arguments),e&&(e.resourceId=t.resourceId),e},r}(l),P=function(t,e,i){var r;return V(i)?(e-t)/i:(r=i.asMonths(),Math.abs(r)>=1&&q(r)?e.diff(t,"months",!0)/r:e.diff(t,"days",!0)/i.asDays())},W=function(t,e){var i,r;return V(t)||V(e)?t/e:(i=t.asMonths(),r=e.asMonths(),Math.abs(i)>=1&&q(i)&&Math.abs(r)>=1&&q(r)?i/r:t.asDays()/e.asDays())},X=function(t,i){var r;return V(t)?e.duration(t*i):(r=t.asMonths(),Math.abs(r)>=1&&q(r)?e.duration({months:r*i}):e.duration({days:t.asDays()*i}))},V=function(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())},c=18,u=6,a=200,h=1e3,n={months:1},w=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}],C.prototype.initScaleProps=function(){var e,i;return this.labelInterval=this.queryDurationOption("slotLabelInterval"),this.slotDuration=this.queryDurationOption("slotDuration"),this.validateLabelAndSlot(),this.ensureGridDuration(),this.ensureLabelInterval(),this.ensureSlotDuration(),this.headerFormats=(e=this.opt("timelineHeader"))&&t.isArray(e)?e:this.computeHeaderFormats(),this.isTimeScale=V(this.slotDuration),this.largeUnit=this.isTimeScale?void 0:(i=F(this.slotDuration),/year|month|week/.test(i)?i:void 0),this.emphasizeWeeks=1===this.slotDuration.as("days")&&this.duration.as("weeks")>=2&&!this.opt("businessHours")},C.prototype.queryDurationOption=function(t){var i,r;return r=this.opt(t),null!=r&&(i=e.duration(r),+i)?i:void 0},C.prototype.validateLabelAndSlot=function(){var t,e,i;return this.duration&&(this.labelInterval&&(t=W(this.duration,this.labelInterval),t>h&&(ne("slotLabelInterval results in too many cells"),this.labelInterval=null)),this.slotDuration&&(e=W(this.duration,this.slotDuration),e>h&&(ne("slotDuration results in too many cells"),this.slotDuration=null))),this.labelInterval&&this.slotDuration&&(i=W(this.labelInterval,this.slotDuration),!q(i)||1>i)?(ne("slotLabelInterval must be a multiple of slotDuration"),this.slotDuration=null):void 0},C.prototype.ensureGridDuration=function(){var t,i,r,o,s;if(t=this.duration,!t){if(t=this.view.explicitDuration,!t)if(this.labelInterval||this.slotDuration)for(o=this.ensureLabelInterval(),s=w.length-1;s>=0&&(i=w[s],t=e.duration(i),r=W(t,o),!(r>=c));s+=-1);else t=e.duration(n);this.duration=t}return t},C.prototype.ensureLabelInterval=function(){var t,i,r,n,o,s,l,a,h;if(r=this.labelInterval,!r){if(this.duration||this.slotDuration||this.ensureGridDuration(),this.slotDuration){for(s=0,a=w.length;a>s;s++)if(t=w[s],o=e.duration(t),n=W(o,this.slotDuration),q(n)&&u>=n){r=o;break}r||(r=this.slotDuration)}else for(l=0,h=w.length;h>l&&(t=w[l],r=e.duration(t),i=W(this.duration,r),!(i>=c));l++);this.labelInterval=r}return r},C.prototype.ensureSlotDuration=function(){var t,i,r,n,o,s,l,h;if(n=this.slotDuration,!n){for(i=this.ensureLabelInterval(),l=0,h=w.length;h>l;l++)if(t=w[l],s=e.duration(t),o=W(i,s),q(o)&&o>1&&u>=o){n=s;break}n&&this.duration&&(r=W(this.duration,n),r>a&&(n=null)),n||(n=i),this.slotDuration=n}return n},C.prototype.computeHeaderFormats=function(){var t,e,i,r,n,o,s,l;switch(s=this.view,r=this.duration,n=this.labelInterval,o=F(n),l=this.opt("weekNumbers"),t=e=i=null,"week"!==o||l||(o="day"),o){case"year":t="YYYY";break;case"month":r.asYears()>1&&(t="YYYY"),e="MMM";break;case"week":r.asYears()>1&&(t="YYYY"),e=s.getWeekNumberFormat();break;case"day":r.asYears()>1?t=this.opt("monthYearFormat"):r.asMonths()>1&&(t="MMMM"),l&&(e=s.getWeekNumberFormat(" ")),i=this.opt("dayDateFormat");break;case"hour":l&&(t=s.getWeekNumberFormat(" ")),r.asDays()>1&&(e=this.opt("dayOfMonthFormat")),i=this.opt("smallTimeFormat");break;case"minute":n.asMinutes()/60>=u?(t=this.opt("hourFormat"),e="[:]mm"):t=this.opt("mediumTimeFormat");break;case"second":n.asSeconds()/60>=u?(t="LT",e="[:]ss"):t="LTS";break;case"millisecond":t="LTS",e="[.]SSS"}return[].concat(t||[],e||[],i||[])},ne=function(){var t;if(t=window.console){if(t.warn)return t.warn.apply(t,arguments);if(t.log)return t.log.apply(t,arguments)}},T=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return se(e,t),e.prototype.unrenderedFgSegs=null,e.prototype.unrenderedBgSegs=null,e.prototype.segContainerEl=null,e.prototype.segContainerHeight=null,e.prototype.renderContent=function(){return this.el.html('<td class="'+this.grid.view.widgetContentClass+'"> <div> <div class="fc-event-container" /> </div> </td>'),this.segContainerEl=this.el.find(".fc-event-container")},e.prototype.show=function(){return e.__super__.show.apply(this,arguments),this.unrenderedBgSegs&&(this.grid.renderRowFill(this,"bgEvent",this.unrenderedBgSegs),this.unrenderedBgSegs=null),this.unrenderedFgSegs?(this.grid.renderRowFgSegs(this,this.unrenderedFgSegs),this.unrenderedFgSegs=null):void 0},e.prototype.destroy=function(){return this.unrenderedBgSegs=null,this.unrenderedFgSegs=null,e.__super__.destroy.apply(this,arguments)},e.prototype.attachSegs=function(t){var e,i,r,n;for(n=[],i=0,r=t.length;r>i;i++)e=t[i],n.push(e.el.appendTo(this.segContainerEl));return n},e.prototype.computeSegVerticals=function(t){var e,i,r;for(i=0,r=t.length;r>i;i++)e=t[i],e.height=e.el.outerHeight(!0);return k(t),this.segContainerHeight=G(t)},e.prototype.assignSegVerticals=function(t){var e,i,r;for(i=0,r=t.length;r>i;i++)e=t[i],e.el.css("top",e.top);return this.segContainerEl.height(this.segContainerHeight)},e.prototype.destroyFgSegs=function(){return this.unrenderedFgSegs=null,this.segContainerEl?(this.segContainerEl.empty(),this.segContainerEl.height(""),this.segContainerHeight=null):void 0},e}(y),k=function(t){var e,i,r,n,o,s,l,a,u,h,c,d,p,f;for(o=[],t.sort(M),l=0,h=t.length;h>l;l++){for(s=t[l],s.above=[],r=0;o.length>r;){for(i=!1,p=o[r],a=0,c=p.length;c>a;a++)n=p[a],ie(s,n)&&(s.above.push(n),i=!0);if(!i)break;r+=1}for((o[r]||(o[r]=[])).push(s),r+=1;o.length>r;){for(f=o[r],u=0,d=f.length;d>u;u++)e=f[u],ie(s,e)&&e.above.push(s);r+=1}}return o},G=function(t){var e,i,r,n;for(e=0,r=0,n=t.length;n>r;r++)i=t[r],e=Math.max(e,_(i));return e},_=function(t){return null==t.top&&(t.top=G(t.above)),t.top+t.height},ie=function(t,e){return t.left<e.right&&t.right>e.left},R=function(){function e(e,i){this.overflowX=null!=e?e:"auto",this.overflowY=null!=i?i:"auto",this.el=t('<div class="fc-scrollpane"> <div class="fc-scrollpane-scroller"> <div class="fc-scrollpane-sizer"> <div class="fc-scrollpane-content"/> </div> </div> </div>'),this.scrollEl=this.el.children().on("scroll",t.proxy(this,"handleScroll")).on("scroll",L(t.proxy(this,"handleScrollStop"),100)),this.sizeEl=this.scrollEl.children(),this.contentEl=this.sizeEl.children(),this.handlers={}}return e.prototype.el=null,e.prototype.scrollEl=null,e.prototype.sizeEl=null,e.prototype.contentEl=null,e.prototype.overflowX=null,e.prototype.overflowY=null,e.prototype.isScrolling=!1,e.prototype.handlers=null,e.prototype.update=function(){var t,e,i,r,n,o,s;return s=this.scrollEl,n=this.overflowX,o=this.overflowY,i="invisible-scroll"===n,r="invisible-scroll"===o,s.toggleClass("fc-no-scrollbars",("invisible-scroll"===n||"invisible-scroll"===o)&&D.getIsFloating()),s.css({overflowX:i?"scroll":n,overflowY:r?"scroll":o}),t={marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},(i||r)&&(e=D.getGirths(s),i&&(t.marginTop=-e.top,t.marginBottom=-e.bottom),r&&(t.marginLeft=-e.left,t.marginRight=-e.right)),s.css(t)},e.prototype.getScrollbarGirths=function(){var t;return t=D.getGirths(this.scrollEl),"invisible-scroll"===this.overflowX&&(t.top=0,t.bottom=0),"invisible-scroll"===this.overflowY&&(t.left=0,t.right=0),t},e.prototype.handleScroll=function(){return this.isScrolling||(this.isScrolling=!0,this.trigger("scrollStart")),this.trigger("scroll",this.scrollEl.scrollTop(),this.scrollEl.scrollLeft())},e.prototype.handleScrollStop=function(){return this.isScrolling=!1,this.trigger("scrollStop")},e.prototype.on=function(t,e){var i;return((i=this.handlers)[t]||(i[t]=[])).push(e),this},e.prototype.trigger=function(){var t,e,i,r,n,o;for(i=arguments[0],t=arguments.length>=2?le.call(arguments,1):[],o=this.handlers[i]||[],r=0,n=o.length;n>r;r++)e=o[r],e.apply(this,t)},e}(),t.each(["height","scrollLeft","scrollTop"],function(t,e){R.prototype[e]=function(){return this.scrollEl[e].apply(this.scrollEl,arguments)}}),E=function(){function t(t,e){var i,r,n,o;for(this.axis=t,this.scrollers=e,o=this.scrollers,r=0,n=o.length;n>r;r++)i=o[r],this.initScroller(i)}return t.prototype.axis=null,t.prototype.scrollers=null,t.prototype.masterScroller=null,t.prototype.initScroller=function(t){return t.on("scrollStart",function(e){return function(){return e.masterScroller?void 0:e.masterScroller=t}}(this)).on("scroll",function(e){return function(i,r){var n,o,s,l,a;if(t===e.masterScroller){for(l=e.scrollers,a=[],o=0,s=l.length;s>o;o++)if(n=l[o],n!==e.masterScroller)switch(e.axis){case"horizontal":a.push(n.scrollLeft(r));break;case"vertical":a.push(n.scrollTop(i));break;default:a.push(void 0)}else a.push(void 0);return a}}}(this)).on("scrollStop",function(e){return function(){return t===e.masterScroller?e.masterScroller=null:void 0}}(this))},t.prototype.update=function(){var t,e,i,r,n,o,s,l,a,u,h,c,d,p;for(t=function(){var t,e,i,r;for(i=this.scrollers,r=[],t=0,e=i.length;e>t;t++)l=i[t],r.push(l.getScrollbarGirths());return r}.call(this),n=o=s=r=0,a=0,h=t.length;h>a;a++)e=t[a],n=Math.max(n,e.left),o=Math.max(o,e.right),s=Math.max(s,e.top),r=Math.max(r,e.bottom);for(d=this.scrollers,p=[],i=u=0,c=d.length;c>u;i=++u)l=d[i],e=t[i],"horizontal"===this.axis?p.push(l.sizeEl.css({"padding-left":n-e.left,"padding-right":o-e.right})):p.push(l.sizeEl.css({"padding-top":s-e.top,"padding-bottom":r-e.bottom}));return p},t}(),S=function(){function e(t){this.scroller=t,this.sprites=[],this.scroller.on("scrollStart",function(t){return function(){return t.shouldRequeryDimensions?t.cacheDimensions():void 0}}(this)),this.scroller.on("scroll",function(t){return function(){var e,i,r;return i=t.scroller.scrollEl,e=Y(i),r=i.scrollTop(),t.viewportRect={left:e,right:e+i[0].clientWidth,top:r,bottom:r+i[0].clientHeight},t.updatePositions()}}(this))}return e.prototype.scroller=null,e.prototype.scrollbarGirths=null,e.prototype.sprites=null,e.prototype.viewportRect=null,e.prototype.contentOffset=null,e.prototype.isHFollowing=!0,e.prototype.isVFollowing=!1,e.prototype.containOnNaturalLeft=!1,e.prototype.containOnNaturalRight=!1,e.prototype.shouldRequeryDimensions=!1,e.prototype.minTravel=0,e.prototype.isForcedAbsolute=!1,e.prototype.isForcedRelative=!1,e.prototype.setSprites=function(e){var i,r,n;if(this.destroySprites(),e instanceof t)return this.sprites=function(){var r,n,o;for(o=[],r=0,n=e.length;n>r;r++)i=e[r],o.push(new b(t(i),this));return o}.call(this);for(r=0,n=e.length;n>r;r++)i=e[r],i.follower=this;return this.sprites=e},e.prototype.destroySprites=function(){var t,e,i,r;for(r=this.sprites,e=0,i=r.length;i>e;e++)t=r[e],t.destroy();return this.sprites=[]},e.prototype.cacheDimensions=function(){var t,e,i,r,n,o,s;for(e=this.scroller.scrollEl,t=Y(e),r=e.scrollTop(),this.viewportRect={left:t,right:t+e[0].clientWidth,top:r,bottom:r+e[0].clientHeight},this.scrollbarGirths=this.scroller.getScrollbarGirths(),this.contentOffset=this.scroller.sizeEl.offset(),s=this.sprites,n=0,o=s.length;o>n;n++)i=s[n],i.cacheDimensions()},e.prototype.forceAbsolute=function(){var t,e,i,r,n;for(this.isForcedAbsolute=!0,r=this.sprites,n=[],e=0,i=r.length;i>e;e++)t=r[e],t.doAbsolute?n.push(void 0):n.push(t.assignPosition());return n},e.prototype.forceRelative=function(){var t,e,i,r,n;for(this.isForcedRelative=!0,r=this.sprites,n=[],e=0,i=r.length;i>e;e++)t=r[e],t.doAbsolute?n.push(t.assignPosition()):n.push(void 0);return n},e.prototype.clearForce=function(){var t,e,i,r,n;for(this.isForcedRelative=!1,this.isForcedAbsolute=!1,r=this.sprites,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.assignPosition());return n},e.prototype.update=function(){return this.cacheDimensions(),this.updatePositions()},e.prototype.updatePositions=function(){var t,e,i,r;for(r=this.sprites,e=0,i=r.length;i>e;e++)t=r[e],t.updatePosition()},e.prototype.getContentRect=function(t){var e,i,r;return i=t.offset(),e=i.left+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.left,r=i.top+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.top,{left:e,right:e+t.width(),top:r,bottom:r+t.height()}},e.prototype.getBoundingRect=function(t){var e,i,r;return i=t.offset(),e=i.left-this.contentOffset.left,r=i.top-this.contentOffset.top,{left:e,right:e+t.outerWidth(),top:r,bottom:r+t.outerHeight()}},e}(),b=function(){function t(t,e){this.el=t,this.follower=null!=e?e:null,this.el.css("position","relative")}return t.prototype.follower=null,t.prototype.el=null,t.prototype.absoluteEl=null,t.prototype.naturalRect=null,t.prototype.parentRect=null,t.prototype.containerRect=null,t.prototype.isEnabled=!0,t.prototype.isHFollowing=!1,t.prototype.isVFollowing=!1,t.prototype.doAbsolute=!1,t.prototype.isAbsolute=!1,t.prototype.isCentered=!1,t.prototype.rect=null,t.prototype.disable=function(){return this.isEnabled?(this.isEnabled=!1,this.resetPosition(),this.unabsolutize()):void 0},t.prototype.enable=function(){return this.isEnabled?void 0:(this.isEnabled=!0,this.assignPosition())},t.prototype.destroy=function(){return this.disable(),this.follower=null,this.absoluteEl=null},t.prototype.cacheDimensions=function(){var t,e,i,r,n,o,s,l;return r=!1,n=!1,i=!1,this.resetPosition(),e=this.follower,s=this.naturalRect=e.getBoundingRect(this.el),l=this.el.parent(),this.parentRect=e.getBoundingRect(l),t=this.containerRect=U(e.getContentRect(l),s),o=e.minTravel,e.containOnNaturalLeft&&(t.left=s.left),e.containOnNaturalRight&&(t.right=s.right),e.isHFollowing&&A(t)-A(s)>=o&&(i="center"===this.el.css("text-align"),r=!0),e.isVFollowing&&B(t)-B(s)>=o&&(n=!0),this.isHFollowing=r,this.isVFollowing=n,this.isCentered=i},t.prototype.updatePosition=function(){return this.computePosition(),this.assignPosition()},t.prototype.resetPosition=function(){return this.el.css({top:"",left:""})},t.prototype.computePosition=function(){var t,e,i,r,n,o,s,l;return s=this.follower.viewportRect,i=this.parentRect,t=this.containerRect,l=j(s,i),r=null,e=!1,l&&(r=z(this.naturalRect),o=j(r,i),(this.isCentered&&!K(s,i)||o&&!K(s,o))&&(e=!0,this.isHFollowing&&(this.isCentered?(n=A(r),r.left=(l.left+l.right)/2-n/2,r.right=r.left+n):O(r,s)||(e=!1),O(r,t)&&(e=!1)),this.isVFollowing&&(re(r,s)||(e=!1),re(r,t)&&(e=!1)),K(s,r)||(e=!1))),this.rect=r,this.doAbsolute=e},t.prototype.assignPosition=function(){var t,e;return this.isEnabled?this.rect?!this.doAbsolute&&!this.follower.isForcedAbsolute||this.follower.isForcedRelative?(e=this.rect.top-this.naturalRect.top,t=this.rect.left-this.naturalRect.left,this.unabsolutize(),this.el.toggleClass("fc-following",Boolean(e||t)).css({top:e,left:t})):(this.absolutize(),this.absoluteEl.css({top:this.rect.top-this.follower.viewportRect.top+this.follower.scrollbarGirths.top,left:this.rect.left-this.follower.viewportRect.left+this.follower.scrollbarGirths.left})):this.unabsolutize():void 0},t.prototype.absolutize=function(){return this.isAbsolute?void 0:(this.absoluteEl||(this.absoluteEl=this.buildAbsoluteEl()),this.absoluteEl.appendTo(this.follower.scroller.el),this.el.css("visibility","hidden"),this.isAbsolute=!0)},t.prototype.unabsolutize=function(){return this.isAbsolute?(this.absoluteEl.detach(),this.el.css("visibility",""),this.isAbsolute=!1):void 0},t.prototype.buildAbsoluteEl=function(){return this.el.clone().addClass("fc-following").css({position:"absolute","z-index":1e3,"font-weight":this.el.css("font-weight"),"font-size":this.el.css("font-size"),"font-family":this.el.css("font-family"),color:this.el.css("color"),"padding-top":this.el.css("padding-top"),"padding-bottom":this.el.css("padding-bottom"),"padding-left":this.el.css("padding-left"),"padding-right":this.el.css("padding-right")})},t}(),z=function(t){return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}},A=function(t){return t.right-t.left},B=function(t){return t.bottom-t.top},te=function(t,e){return t.right>e.left&&e.right>t.left&&t.bottom>e.top&&e.bottom>t.top},K=function(t,e){return J(t,e)&&ee(t,e)},J=function(t,e){return e.left>=t.left&&e.right<=t.right},ee=function(t,e){return e.top>=t.top&&e.bottom<=t.bottom},O=function(t,e){return t.left<e.left?(t.right=e.left+A(t),t.left=e.left,!0):t.right>e.right?(t.left=e.right-A(t),t.right=e.right,!0):!1},re=function(t,e){return t.top<e.top?(t.bottom=e.top+B(t),t.top=e.top,!0):t.bottom>e.bottom?(t.top=e.bottom-B(t),t.bottom=e.bottom,!0):!1},j=function(t,e){return te(t,e)?{left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}:void 0},U=function(t,e){return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}}});